/// <reference types="node" />
import EdgeFunctionsBuilder from './EdgeFunctionsBuilder';
import { Rules } from '../../types';
/**
 * The edge functions builder for NodeJS environment.
 * This builder uses esbuild to bundle the index file, so it allows to use imports in edge functions.
 * This builder builds the index file 'edgeFunctionsIndexCodeTemplate' with sdk, edge functions and bundle it.
 * The index file is then compiled to QuickJS bytecode.
 */
export default class EdgeFunctionsNodeBuilder extends EdgeFunctionsBuilder {
    protected baseDir: string;
    /**
     * @param rules The router rules
     * @param baseDir The base of the project directory
     */
    constructor(rules: Rules[], baseDir: string);
    /**
     * Returns the code with edge function import as string
     * which can later be inserted into edge functions map.
     * @returns
     */
    protected getFunctionCode(srcPath: string): string;
    /**
     * Returns the code of prebuilt the index code template from the file system.
     * @returns
     */
    protected getIndexCodeTemplate(): Promise<string>;
    /**
     * Bundles the generated index code into a single file bundle
     * and returns the bundled code
     * @returns
     */
    bundleIndexCode(indexFilePath?: string): Promise<string>;
    /**
     * Builds all edge functions referenced by the specified rules and compiles them.
     * Returns a Buffer with the compiled bytecode for the edge functions index file
     * or undefined if there are no edge functions.
     * @param options Additional options with custom paths
     * @returns
     */
    build(options?: {
        indexFilePath?: string;
        bytecodePath?: string;
    }): Promise<Buffer | undefined>;
    /**
     * Bundles the edge functions index at the specified path into a single file bundle.
     * @param indexPath
     * @returns
     */
    bundle(indexPath: string): Promise<any>;
    /**
     * Converts the edge function into cjs
     * @param code
     * @returns cjs
     */
    convertToCjs(code: string): Promise<string>;
}
