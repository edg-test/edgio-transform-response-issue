import { HTTPMethod } from '../constants';
import { BrowserCacheOptions, CacheOptions, EdgeCacheOptions } from './CacheOptions';
export type ManifestCacheOptions = Omit<CacheOptions, 'edge' | 'browser' | 'key'> & {
    edge?: EdgeCacheOptions;
    browser?: BrowserCacheOptions;
    key?: any;
};
export type OptionalNotValue<TValue extends string> = {
    isNot?: boolean;
    value: TValue;
};
/**
 * A representation of a route to be passed to the browser.
 * @private
 */
export interface CacheManifestEntry {
    /**
     * Criteria path as expressed in User's routes
     */
    criteriaPath: string | undefined;
    /**
     * The criteria path turned into a regexp string
     */
    route: string;
    /**
     * Key/value pairs for the route's query params to match
     */
    query?: {
        [key: string]: OptionalNotValue<string> | undefined;
    };
    /**
     * Caching options for the route
     */
    cacheOptions: ManifestCacheOptions;
    /**
     * Optional http method to match for the route
     */
    method?: OptionalNotValue<HTTPMethod>;
    /**
     * Optional protocol to match for the route
     */
    protocol?: OptionalNotValue<string>;
}
/**
 * A serializable array of route descriptors to be passed to the browser.
 * @private
 */
export default class CacheManifest {
    entries: CacheManifestEntry[];
    constructor(entries?: CacheManifestEntry[]);
    /**
     * Returns a list of entries in this CacheManifest where both the browser and
     * edge cache times are defined, and greater than 0
     */
    get cacheableEntries(): CacheManifestEntry[];
    /**
     * Returns a list of routes (as RegExp) that are cacheable SPA routes
     */
    get spaRoutes(): RegExp[];
    /**
     * Returns true if the URL should be prefetched, based on the matched route's `cacheOptions`
     * @param url The URL to test
     */
    shouldPrefetch(url: URL): boolean;
    /**
     * Returns true if the entry matches the URL's path, query params, and/or protocol
     * @param entry The entry to test
     * @param url URL to check against the entry
     */
    static entryMatches(entry: CacheManifestEntry, url: URL): boolean;
    /**
     * Returns true if the given entry has its `cacheOptions` set so that the route
     * is cacheable by the edge and the browser.
     * @param entry The entry to test
     */
    static isEntryCacheable({ cacheOptions }: CacheManifestEntry): boolean;
    /**
     * Creates a new `CacheManifest` object from the provided serialized entries
     */
    static fromEntries(entries: CacheManifestEntry[]): CacheManifest;
    /**
     * Test a string against a pattern that may be negated
     */
    static matchRegex<TValue extends string>(pattern: OptionalNotValue<TValue>, value: string, regexOptions?: string): boolean;
    /**
     * Serializes the list so that it can be passed to the browser
     */
    toJSON(): string;
}
