import { RulesVariables } from '../types';
import { ExactPath } from '../router/exact';
/**
 * Criteria for matching against the response.
 * @private
 */
interface RouteCriteriaResponse {
    /**
     * The status code of the origin response.
     */
    status_code: RegExp;
}
export type CriteraBaseValue = string | RegExp;
export interface Negation<NegationType = CriteraBaseValue | PathMatchValue> {
    not: NegationType;
}
export type CriteriaValue = CriteraBaseValue | Negation<CriteraBaseValue>;
export type OptionalCriteriaValue = CriteriaValue | null;
export type PathMatchValue = CriteraBaseValue | ExactPath;
export type PathCriteriaValue = PathMatchValue | Negation<PathMatchValue>;
export declare const isNegation: (value?: OptionalCriteriaValue | PathCriteriaValue | InOperatorValues) => value is Negation<any>;
export type Location = NonNullable<RulesVariables['location']>;
export type Device = NonNullable<RulesVariables['device']>;
export type Variable = NonNullable<RulesVariables['variable']>;
/**
 * This is a generic array of values when we want to match multiple values
 * againts one of the criteria values. Matching multiple values for a criteria will
 * use simple string (or number in edge cases) comparison, so if multiple matching
 * is needed with advanced matching, then use CriteriaValue and create nested rules.
 *
 * @example
 * match({ path: ['/foo', '/bar'] }, features)
 *
 * will match againts the /foo and /bar paths on { request: 'path' } criteria.
 * match is done with in operator, so it is same as doing ifs with or between them.
 **/
export type InOperatorValues<ItemType = string> = ItemType[];
/**
 * Criteria for matching a request.
 */
export default interface RouteCriteria {
    /**
     * Matches a request based on its protocol / scheme. Unless explicitly specified then `https`
     * is the default. To serve a route on both HTTPS and HTTP you can specify `/https?/`
     * regex. If an HTTP request is not matched against any route, Edgio will
     * automatically issue a redirect to equivalent HTTPS URL.
     */
    scheme?: CriteriaValue | InOperatorValues;
    /**
     * Matches a request based on one or more header values. Keys are
     * case-insensitive header names, values are regular expressions to match or null.
     * When value is null then requests are matched for the header not being present.
     */
    headers?: {
        [name: string]: OptionalCriteriaValue | InOperatorValues;
    };
    /**
     * Matches a request based on one or more cookie values. Keys are
     * case-sensitive cookie names, values are regular expressions to match or null.
     * When value is null then requests are matched for the cookie not being present.
     */
    cookies?: {
        [name: string]: OptionalCriteriaValue | InOperatorValues;
    };
    /**
     * Matches a request based on one or more query parameter values. Keys are
     * case-sensitive names, values are regular expressions to match or null.
     * When value is null then requests are matched for the query parameter not being present.
     */
    query?: {
        [name: string]: OptionalCriteriaValue | InOperatorValues;
    };
    /**
     * Matches a request based on the HTTP method. Instead of this, prefer using
     * `get`, `post`, `put`, `delete`, `options`, and `patch` methods.
     */
    method?: CriteriaValue | InOperatorValues;
    /**
     * Matches a request based on the path. The same path syntax is used by
     * the simple form of the Router class's `match` method.
     * The path can be an express-style path expression or regular expression.
     * Both express-style path and regular expression need to match the entire path including the leading slash.
     * @example "/products/:id"
     * @example /^\/products\/(.+)$/
     */
    path?: PathCriteriaValue | InOperatorValues;
    random?: number | InOperatorValues<number>;
    pop_code?: string | InOperatorValues;
    /**
     * Matches a request based on the specific location property.
     * See: https://docs.edgecast.com/cdn/index.html#HRE/M/Location-Match-Conditions.htm%3FTocPath%3DContent%2520Delivery%7CRequest%7CCustom%2520Request%2520Handling%2520via%2520Rules%2520Engine%7CMatches%2520and%2520Features%7CMatches%7CLocation%7C_____0
     */
    location?: {
        [name in Location]: OptionalCriteriaValue | InOperatorValues;
    };
    /**
     * Matches a request based on the variable value.
     */
    variable?: {
        [name in Variable]: OptionalCriteriaValue | InOperatorValues;
    };
    /**
     * Matches a request based on the specific device property.
     * See: https://docs.edgecast.com/cdn/index.html#HRE/M/Device-Match_Condtions.htm%3FTocPath%3DContent%2520Delivery%7CRequest%7CCustom%2520Request%2520Handling%2520via%2520Rules%2520Engine%7CMatches%2520and%2520Features%7CMatches%7CDevice%7C_____0
     */
    device?: {
        [name in Device]: OptionalCriteriaValue | InOperatorValues;
    };
    /**
     * Matches properties of the response response.
     */
    response?: RouteCriteriaResponse;
    /**
     * Matches a request based on the client ip variable value(s).
     */
    client_ip?: string | InOperatorValues;
    /**
     * Matches a request based on the referring-domain variable value(s).
     */
    'referring-domain'?: string | InOperatorValues;
}
export {};
