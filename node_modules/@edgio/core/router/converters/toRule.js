"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.toRule = void 0;
const createMatchers_1 = require("../createMatchers");
const toRule = (criteria, features) => {
    let matchers = (0, createMatchers_1.createMatchers)(criteria);
    // when there are no matchers for rule, we can return only feature as rule
    if (matchers.length === 0) {
        return features;
    }
    // when we have only one matcher, we don't need to wrap it in an array
    // we need to extract it from the array, otherwise wrap it into the "and" operator
    matchers = matchers.length == 1 ? matchers[0] : { and: matchers };
    const rule = {
        if: [matchers, features],
    };
    return rule;
};
exports.toRule = toRule;
